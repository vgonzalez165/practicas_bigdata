```
------------- ESPECIALIZACIÓN EN INTELIGENCIA ARTIFICIAL Y BIG DATA -------------
---------------------------------------------------------------------------------

Módulo:                     SISTEMAS DE BIG DATA
Profesor:                   Víctor J. González
Unidad de Trabajo:          UT02. Almacenamiento de datos
Práctica:                   PR0204: Estructuras de datos avanzadas. Datos geoespaciales
Resultados de aprendizaje:  RA3
```

# PR0204: Estructuras de datos avanzadas: datos geoespaciales


Debes crear el *backend* para una aplicación de mapas, en concreto vas a implementar la funcionalidad de  "Buscador de Puntos de Interés (POI)".

Tu tarea es cargar en Redis una lista de ubicaciones (restaurantes, museos, parques, etc.) y luego crear scripts que permitan a un usuario encontrar los puntos más cercanos a él.

En Redis usarás una única clave de tipo `Sorted Set` (manejada con comandos GEO) para almacenar todas las ubicaciones.La clave se llamará `poi:locations`, almacenará la ubicación (longitud, latitud) de todos los puntos de interés y también un identificador único para el POI.

Además, necesitarás una segunda clave de tipo `Hash` que llamaremos `poi:info` para guardar la relación entre identificador y nombre del POI



## Tareas a desarrollar

### Tarea 1: Carga de datos

El objetivo de esta tareaa será poblar la base de datos Redis con los puntos de interés.

Los requisitos son:

1.  Crear un script `load_locations.py`.
2.  Utiliza la estructura de datos que está en el fichero [locations.py](./locations.py) con POIs de Madrid
3.  El script debe conectarse a Redis y, en un bucle:
        - **Añadir la ubicación:** usa `r.geoadd("poi:locations", (longitud, latitud, id))`
        - **Guardar el nombre:** usa `r.hset("poi:info", id, "Nombre del POI")`
4.  Imprimir un mensaje de "Datos cargados" al finalizar.


### Tarea 2: Búsqueda por radio

El objetivo de esta función es encontrar todos los POIs dentro de un radio específico desde la ubicación del usuario.
  
Los pasos a realizar son:

1.  Crea un script `find_by_radius.py(lat, lon, distance=2000)`.
2.  Define una ubicación de "Usuario" (p.ej., `lat=40.41677`, `lon=-3.70379`, que es la Puerta del Sol).
3.  Usa el comando `GEOSERACH` para encontrar todos los POIs en un radio.
4.  Para cada POI encontrado (que será un `id`) consulta el `HASH` `poi:info` para obtener su nombre.
5.  Imprime un informe: `Encontrados X POIs en 2 km:`
      - `-> Museo del Prado (id_001)`
      - `-> Palacio Real (id_003)`
  

### Tarea 3 (Opcional): Búsqueda del "más cercano"

El objetivo será encontrar el punto de interés *único* más cercano al usuario, sin importar la distancia.

Debes de:

1.  Crear un script `find_nearest.py(lat, lon)` que recogerá la ubicación del usuario.
2.  Usa el comando `GEOSERACH` para encontrar el POI **más cercano** (solo 1).
3.  Asegúrate de pedir también la **distancia**.
4.  Imprime el resultado: `El POI más cercano es "Nombre del POI", que está a X.XX km.`


**NOTA**: en [esta página](https://redis.io/docs/latest/develop/data-types/geospatial/) tienes la documentación sobre los comandos geoespaciales de Redis