```
------------- ESPECIALIZACIÓN EN INTELIGENCIA ARTIFICIAL Y BIG DATA -------------
---------------------------------------------------------------------------------

Módulo:                     SISTEMAS DE BIG DATA
Profesor:                   Víctor J. González
Unidad de Trabajo:          UT02. Almacenamiento de datos
Práctica:                   PR0202: Listas en Redis
Resultados de aprendizaje:  RA3
```


# PR0202: Listas en Redis

## Entorno de trabajo

Para esta práctica necesitarás tener el siguiente entorno:

- [Contenedor Docker con Redis](https://vgonzalez165.github.io/docker_resources/compose/redis/)
- [Contenedor Docker con Jupyter Notebook](https://vgonzalez165.github.io/docker_resources/compose/jupyter_notebook/)
- [Redis Insight](../../../recursos/Redis-Insight-win-installer.exe)

## Ejercicios

### Cola de pedidos encapsulada en funciones

Se quiere simular un sistema de **gestión de pedidos online** donde los pedidos se almacenan en Redis en una cola (`lista`). Para que el código sea más organizado y reutilizable, las operaciones de añadir y procesar pedidos estarán encapsuladas en funciones.

**Tareas:**

1. Crea un script en Python que use la librería `redis`.
2. Define una función `agregar_pedido(cliente, producto)` que reciba el nombre del cliente y el producto comprado, cree un pedido en formato de diccionario, lo convierta a cadena (ej. JSON) y lo inserte en la lista `pedidos` usando `RPUSH`. El formato del JSON será de la forma:

    ```python
    {
        "id": "pedido_001",
        "cliente": "Juan Pérez",
        "producto": "Portátil Lenovo",
        "cantidad": 1,
        "urgente": False
    }
    ```

3. Por ahora, `cantidad` siempre será `1` y el valor de `urgente` será `False`.
4. Para convertir una estructura de datos a JSON deberás importar la librería `json` y usar el método `json.dumps()`. El proceso inverso (recuperar la estructura de datos a partir del JSON) lo puedes realizar con el método `json.loads()`. Tienes un ejemplo en [esta página](https://www.w3schools.com/python/python_json.asp).
5. Define una función `procesar_pedido()` que extraiga un pedido de la lista `pedidos` usando `LPOP`, lo convierta de nuevo en diccionario y muestre en pantalla qué pedido se está procesando.
6. Inserta 5 pedidos iniciales llamando a la función `agregar_pedido`.
7. Muestra todos los pedidos actuales en la cola con `LRANGE`.
8. Inserta 2 pedidos adicionales (simulando nuevos clientes).
9. Procesa todos los pedidos de la cola llamando repetidamente a `procesar_pedido()` hasta que no queden más pedidos.
10. Inserta un pedido **urgente** con `LPUSH` (puede implementarse en una versión extendida de la función `agregar_pedido`) y procésalo antes que el resto.
11. Verifica con **Redis Insight** cómo evoluciona la lista en cada fase.


Cada pedido será un diccionario Python convertido a JSON antes de guardarlo en Redis:


### 3. Visualización con Redis Insight

1. Localiza las listas `tareas` y `pedidos` en Redis Insight.
2. Comprueba cómo se almacenan los elementos en orden (de izquierda a derecha).
3. Verifica cómo cambian los elementos tras añadir, eliminar y procesar pedidos.
4. Confirma que las listas eliminadas ya no aparecen en Redis Insight.


## Entrega

Deberás entregar un **documento** con:
- Comandosde las operaciones realizadas en **CLI**.
- Script en **Python** con las operaciones indicadas
- Capturas de **Redis Insight** mostrando los datos creados, modificados y eliminados.
